# 更新日志

## [2.0.5] - 2024-12-19 - 性能优化大版本

### 🚀 性能优化
1. **本地缓存系统**
   - 创建 `CacheService` 缓存服务，支持搜索结果、成语详情、高频词信息缓存
   - 缓存有效期30分钟，自动过期清理
   - 减少重复网络请求，提升响应速度

2. **搜索性能优化**
   - 增加搜索防抖时间到500ms，减少无效请求
   - 搜索结果本地缓存，相同查询直接返回缓存
   - 优化加载状态显示，区分搜索和加载状态

3. **详情页加载优化**
   - 成语详情信息本地缓存，避免重复查询
   - 高频词信息缓存，减少额外网络请求
   - 优化加载流程，先查缓存再查网络

4. **网络请求优化**
   - 智能缓存策略，只缓存第一页搜索结果
   - 异步高频词查询，不影响主流程
   - 错误处理和重试机制

### 📱 用户体验提升
- **响应速度提升**：缓存命中时响应时间从秒级降到毫秒级
- **网络友好**：减少网络请求次数，节省流量
- **离线支持**：缓存数据支持离线查看
- **智能预加载**：为常用搜索词预加载数据

### 🔧 技术实现
- **缓存策略**：使用 AsyncStorage 实现本地缓存
- **缓存键生成**：基于查询参数的唯一键生成
- **过期管理**：自动清理过期缓存数据
- **内存优化**：缓存大小监控和管理

## [2.0.4] - 2024-12-19 - 成语大全页面功能

### ✨ 新增功能
1. **成语大全页面**
   - 创建 `app/idiom/index.tsx` 页面，处理 `/idiom/` 路径访问
   - 提供完整的成语浏览和搜索功能
   - 支持按分类筛选成语
   - 实时搜索成语、释义和拼音

2. **智能搜索系统**
   - 支持成语名称、释义、拼音的多字段搜索
   - 实时过滤结果，提升用户体验
   - 搜索结果统计显示

3. **分类筛选功能**
   - 动态获取所有成语分类
   - 水平滚动的分类选择器
   - 支持"全部"分类查看所有成语

4. **响应式列表展示**
   - 使用 FlatList 优化长列表性能
   - 成语卡片统一展示
   - 空状态友好提示

### 🔧 技术实现
- **路由处理**：解决 `/idiom/` 路径访问问题，提供默认页面
- **状态管理**：使用 useState 管理搜索和筛选状态
- **性能优化**：useEffect 优化过滤逻辑，避免重复计算
- **类型安全**：完整的 TypeScript 类型定义

### 📱 用户体验增强
- **直观导航**：清晰的返回按钮和页面标题
- **快速搜索**：搜索框支持即时输入和结果展示
- **分类浏览**：按兴趣分类快速找到相关成语
- **统计信息**：实时显示搜索结果数量
- **空状态处理**：友好的无结果提示

### 🎨 界面设计
- **统一风格**：与现有页面保持一致的视觉风格
- **渐变头部**：使用紫色渐变背景
- **卡片布局**：清晰的内容分区和视觉层次
- **交互反馈**：按钮点击和状态变化动画

### 🧪 功能验证
**访问路径测试**：
- ✅ `http://localhost:8081/idiom/` - 成语大全页面
- ✅ `http://localhost:8081/idiom/[id]` - 成语详情页面
- ✅ 页面间导航正常

**功能测试**：
- ✅ 搜索功能正常工作
- ✅ 分类筛选正常
- ✅ 成语卡片点击跳转正常
- ✅ 返回按钮功能正常

## [2.0.3] - 2024-12-19 - 成语和高频词数据库关联功能

### ✨ 新增功能
1. **高频词查询API扩展**
   - 在 `GaoPinApiService` 中添加 `getGaoPinByIdiomName()` 方法
   - 支持根据成语名称查询对应的高频词信息
   - 添加批量查询方法 `getGaoPinByIdiomNames()`

2. **高频词信息展示组件**
   - 创建 `GaoPinInfo.tsx` 组件，智能展示高频词学习信息
   - 支持显示：难度等级、分类、易混淆词汇、易错场景、标签等
   - 使用主题色系统，与成语分类颜色保持一致
   - 响应式设计，智能隐藏空内容模块

3. **成语详情页面集成**
   - 修改 `app/idiom/[id].tsx`，无缝集成高频词信息查询
   - 当成语存在于高频词数据库时，自动显示相关学习指导
   - 优雅处理查询失败，不影响原有功能体验

### 🔧 技术实现
- **数据关联方式**：通过成语名称(word字段)进行跨数据库关联查询
- **错误处理策略**：查询失败时不显示错误信息，确保用户体验流畅
- **异步性能优化**：使用异步查询，避免阻塞主界面渲染
- **类型安全保障**：完整的TypeScript类型定义和检查

### 📱 用户体验增强
- **智能信息展示**：只有高频成语才显示额外学习信息
- **学习指导丰富化**：提供易混淆词汇、易错场景等实用信息  
- **视觉设计统一**：高频词信息与页面主题色保持一致
- **无缝功能集成**：保持原有功能完整性，向下兼容

### 🧪 功能验证
**导航测试通过**：
- ✅ 主页成语卡片 → `router.push(\`/idiom/${idiomId}\`)`
- ✅ 搜索页面结果 → `router.push(\`/idiom/${idiomId}\`)`  
- ✅ 收藏页面成语 → `router.push(\`/idiom/${favorite.idiom.derivation}\`)`

**技术状态**：
- ✅ API服务层实现完成
- ✅ 展示组件创建完成
- ✅ 页面集成完成
- ✅ TypeScript类型错误修复完成
- ✅ 开发服务器正常运行

**使用方法**：
1. 启动应用，访问主页
2. 点击任意成语卡片进入详情页面
3. 正确的URL格式：`http://localhost:8081/idiom/[成语ID]`
4. 如果该成语存在于高频词数据库中，详情页面会显示额外的学习信息

## [2.0.2] - 2025-01-XX - 手机号注册功能

### 🆕 新增功能
- **手机号注册**：支持使用手机号码进行用户注册
- **短信验证码**：自动发送6位数字验证码到用户手机
- **双重认证方式**：用户可选择邮箱或手机号注册
- **验证码重发**：60秒冷却时间，支持重新发送验证码
- **格式验证**：自动验证中国大陆手机号格式
- **美观UI**：专门的手机号注册界面，用户体验优秀

### 🔧 技术改进
- 更新用户数据模型，支持手机号字段
- 扩展认证服务，支持手机号相关操作
- 添加手机号验证和重发功能
- 创建专门的手机号注册组件 `PhoneAuthScreen`
- 更新数据库架构，支持手机号存储

### 📱 界面优化
- 在登录界面添加"使用手机号注册"选项
- 创建独立的手机号注册流程
- 添加验证码输入界面
- 实现返回按钮和流程切换
- 手机号格式化显示，提升用户体验

### 🛠️ 配置支持
- 提供完整的 Supabase 手机号认证配置指南
- 创建数据库更新脚本 `supabase-phone-auth-setup.sql`
- 支持 Twilio 和国内 SMS 服务商
- 详细的部署和测试说明

### 🔒 安全增强
- 用户表约束确保至少有邮箱或手机号之一
- 手机号唯一性约束
- 行级安全策略 (RLS) 保护用户数据
- 验证码重发冷却机制

## [2.0.1] - 2025-07-06 - 文档整理 & Windows 兼容

### 🛠️ 修复
- **跨平台启动脚本**：引入 `cross-env`，解决 Windows 无法识别 `EXPO_NO_TELEMETRY` 环境变量的问题。

### 📚 文档
- **文档整理**：删除冗余文档 (`SUPABASE_INTEGRATION_COMPLETE.md`, `基本信息.md`, `API_COMPLETE.md`, `API_INTEGRATION_EXAMPLES.md`)；更新 `INDEX.md` 统计信息；在 `development-guide.md` 和 `README.md` 中补充 cross-env 说明。

## [2.0.0] - 2024-12-19 - UI优化大版本

### ✨ 全新特性
- **🎨 全面UI重设计**：采用明亮色彩贴纸风格，提升视觉亲和力
- **🏠 智能首页**：新增今日成语推荐、学习进度统计、中央学习按钮
- **📱 动画交互系统**：增加卡片动画、点击反馈、收藏动画等生动交互
- **🎭 动态主题色彩**：根据成语分类自动调整页面主色调
- **📊 学习统计功能**：连续打卡天数、已掌握成语数、今日目标进度

### 🔄 界面优化
- **成语卡片重设计**：
  - 分类彩色标签系统
  - 可展开/收起详细内容
  - 发音按钮（UI就绪，功能待实现）
  - 明亮渐变背景
  - 阴影和圆角优化

- **详情页面全新布局**：
  - 动态颜色主题适配
  - 入场动画效果（淡入+缩放）
  - 卡片式内容分层
  - 装饰性图标元素
  - 难度等级可视化

- **首页内容重构**：
  - 渐变背景头部区域
  - 今日成语特色卡片
  - 学习进度仪表盘
  - 大型中央学习按钮
  - 精选成语快速浏览

### 🎨 设计系统升级
- **色彩方案**：
  - 主色调：暖色系渐变 (#FF6B6B → #FF8E53)
  - 分类色彩：每个类别独特的双色渐变
  - 艺术创作：#FF6B6B → #FFE66D
  - 学习教育：#4ECDC4 → #45B7D1
  - 志向理想：#96CEB4 → #FFEAA7
  - 坚持努力：#DDA0DD → #98D8C8
  - 医术技艺：#F7DC6F → #BB8FCE

- **动画效果**：
  - 页面入场动画（600ms 淡入 + 弹性缩放）
  - 按钮点击反馈（100ms 缩放效果）
  - 收藏动作动画（150ms 放大后恢复）
  - 卡片悬停状态变化

- **视觉层次**：
  - 明确的内容分区
  - 合理的留白使用
  - 统一的圆角规范（12px-24px）
  - 一致的阴影系统

### 🛠️ 技术改进
- **新增依赖**：
  - 使用 expo-linear-gradient 实现渐变效果
  - 引入 React Native Animated API 实现动画
  - 新增多个 Lucide 图标组件

- **组件架构优化**：
  - IdiomCard 组件完全重写，支持展开/收起
  - 详情页面模块化重构
  - 首页组件拆分为多个子组件

- **状态管理增强**：
  - 新增学习进度状态管理
  - 今日成语推荐算法
  - 动画状态控制

### 📱 用户体验提升
- **交互优化**：
  - 减少操作步骤，突出主要功能
  - 增加动画反馈，提升操作感知
  - 优化触摸区域，提高操作精度

- **信息架构**：
  - 内容分层展示，避免信息过载
  - 渐进式信息披露
  - 重要功能位置优化

- **视觉反馈**：
  - 所有交互操作提供即时反馈
  - 状态变化清晰可见
  - 加载状态优雅处理

### 🔧 代码质量
- **TypeScript 类型增强**：
  - 修复渐变色属性类型问题
  - 完善组件 Props 接口定义
  - 增强类型安全性

- **代码结构优化**：
  - 功能模块化拆分
  - 样式表重新组织
  - 代码注释完善

### 📚 文档更新
- 完全更新 README.md，增加UI优化相关内容
- 新增设计理念和色彩系统说明
- 补充动画效果和交互设计文档
- 更新技术栈和依赖信息

---

## [1.0.0] - 2024-12-18 - 初始版本

### ✨ 核心功能
- **成语浏览**：首页展示成语列表，支持滚动浏览
- **详细查看**：点击成语查看详细释义、出处、例句
- **搜索功能**：支持按成语、拼音、含义、分类搜索
- **收藏系统**：收藏喜欢的成语，本地存储
- **分类标签**：按主题分类组织成语内容

### 🛠️ 技术架构
- **React Native 0.79.1**：跨平台移动应用框架
- **Expo 53.0.0**：开发工具链和服务平台
- **TypeScript 5.8.3**：类型安全的 JavaScript 超集
- **Expo Router 5.0.2**：基于文件系统的路由
- **Lucide React Native**：现代化图标库

### 🎨 设计实现
- **字体系统**：思源宋体 + Inter 字体组合
- **色彩方案**：传统中国风红色主题
- **布局设计**：卡片式布局，清晰的信息层次
- **导航系统**：底部标签页导航

### 📱 页面结构
- **首页（index）**：成语列表展示
- **搜索页（search）**：成语搜索和过滤
- **收藏页（favorites）**：收藏的成语管理
- **个人页（profile）**：用户设置和信息
- **详情页（idiom/[id]）**：成语详细信息

### 📊 数据模型
- **成语数据结构**：包含 id、成语、拼音、释义、出处、例句、相似成语、分类、难度等字段
- **分类体系**：艺术创作、学习教育、志向理想、坚持努力、医术技艺等分类
- **示例数据**：预置 10+ 个精选成语数据

### 🔧 开发工具
- **开发服务器**：Expo Dev Server
- **代码检查**：ESLint 配置
- **构建支持**：Web 平台构建支持

---

## 🚀 未来规划

### 版本 2.1 计划（2024年第一季度）
- **语音功能**：
  - [ ] 集成文字转语音 API
  - [ ] 成语标准发音播放
  - [ ] 语音速度调节
  - [ ] 离线语音包下载

- **学习系统增强**：
  - [ ] 个性化学习计划
  - [ ] 遗忘曲线复习提醒
  - [ ] 学习历史记录
  - [ ] 掌握度评估算法

### 版本 2.2 计划（2024年第二季度）
- **社交功能**：
  - [ ] 成语卡片分享
  - [ ] 学习成就分享
  - [ ] 好友学习排行
  - [ ] 学习打卡社区

- **游戏化元素**：
  - [ ] 成语闯关游戏
  - [ ] 学习徽章系统
  - [ ] 连续打卡奖励
  - [ ] 学习等级系统

### 版本 3.0 愿景（2024年下半年）
- **AI 智能化**：
  - [ ] 基于学习历史的智能推荐
  - [ ] 个性化难度调节
  - [ ] 智能学习路径规划
  - [ ] 成语使用场景推荐

- **内容扩展**：
  - [ ] 诗词典故关联
  - [ ] 历史故事背景
  - [ ] 文化知识拓展
  - [ ] 多媒体内容支持

- **平台扩展**：
  - [ ] Web 端完整功能
  - [ ] 桌面应用版本
  - [ ] 小程序版本
  - [ ] 多语言国际化

### 长期愿景
- **教育生态**：
  - [ ] 教师版功能模块
  - [ ] 学生班级管理
  - [ ] 学习数据分析
  - [ ] 教学资源库

- **文化传承**：
  - [ ] 传统文化知识体系
  - [ ] 非遗文化内容
  - [ ] 地方方言成语
  - [ ] 国际文化交流

---

## 📊 技术债务

### 当前待优化项目
- [ ] 成语数据库扩展（目标：1000+ 成语）
- [ ] 图片资源优化和压缩
- [ ] 网络请求缓存机制
- [ ] 应用启动性能优化
- [ ] 内存使用优化

### 代码重构计划
- [ ] 状态管理迁移到 Zustand
- [ ] 网络层抽象和封装
- [ ] 工具函数模块化
- [ ] 测试用例补充
- [ ] 代码分割和懒加载

### 性能优化目标
- [ ] 应用启动时间 < 2秒
- [ ] 页面切换动画 < 300ms
- [ ] 内存占用 < 100MB
- [ ] 包体积 < 50MB
- [ ] 电池消耗优化

---

*本更新日志遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范。*

## 2.0.2 (2024-12-19)

### 新增功能
- ✅ **用户数据库架构创建完成** - 成功部署完整的用户数据库系统
  - 9个核心表：users, learning_records, favorites, quiz_results, achievements, user_achievements, learning_sessions, user_settings, learning_statistics
  - 完整的 RLS (行级安全) 策略配置
  - 自动触发器和数据库函数
  - 性能优化索引
  - 示例数据和验证脚本

### 修复
- 🔧 修复 SQL 脚本策略重复创建错误
  - 添加 `DROP POLICY IF EXISTS` 确保脚本可重复运行
  - 解决 "policy already exists" 错误 

## 2.0.3 (2024-11-XX)

### 新增功能
- ✅ 完成用户认证系统集成
  - 用户注册、登录、登出功能
  - 用户资料管理和编辑
  - 认证状态管理和持久化
- ✅ 完成学习记录系统集成
  - 学习行为记录（查看、学习、测试、收藏）
  - 学习统计数据（时长、成语数量、连续天数）
  - 学习热力图数据支持
- ✅ 完成收藏系统集成
  - 收藏成语功能
  - 收藏列表管理
  - 收藏标签和优先级
  - 收藏筛选和搜索
  - 收藏统计和分析

### 技术改进
- 集成真实的 Supabase 数据库操作
- 完善的 TypeScript 类型定义
- 统一的错误处理机制
- 响应式 UI 设计
- 离线数据同步支持

### 用户体验
- 个人页面显示真实学习统计
- 收藏页面支持筛选和管理
- 认证状态下的功能访问控制
- 加载状态和错误提示
- 下拉刷新和数据更新

### 开发工具
- 创建了完整的 Hook 系统
- 统一的认证提供者
- 可复用的组件设计
- 完善的文档更新

## 2.0.2 (2024-11-XX)

### 数据库架构
- ✅ 完成用户数据库设计和创建
  - 9个核心表结构设计
  - 完整的 RLS 安全策略
  - 自动触发器和函数
  - 数据库索引优化
- ✅ 修复 SQL 脚本重复运行问题
  - 添加 DROP POLICY IF EXISTS 语句
  - 确保脚本可重复执行

### 文档更新
- 更新数据库配置指南
- 添加部署状态确认
- 完善技术文档

## 2.0.1 (2024-11-XX)

### 开发环境修复
- ✅ 解决 Windows PowerShell 执行策略问题
- ✅ 修复 Windows 环境变量语法错误
  - 安装 `cross-env` 依赖
  - 修改 npm scripts 使用 `cross-env`
- ✅ 成功启动 Expo 开发服务器

### 文档整理
- 删除冗余文档文件
- 整理文档结构
- 更新开发指南

### 文件变更
- 删除：`docs/SUPABASE_INTEGRATION_COMPLETE.md`
- 删除：`docs/基本信息.md`
- 删除：`docs/API_COMPLETE.md`
- 删除：`docs/API_INTEGRATION_EXAMPLES.md`
- 更新：`package.json` - 添加 cross-env 依赖

## 2.0.0 (2024-11-XX)

### 重大更新
- 项目重构为现代 React Native 架构
- 集成 Supabase 后端服务
- 完整的用户认证系统
- 学习进度跟踪
- 收藏系统
- 测试功能
- 成就系统

### 技术栈
- React Native + Expo
- TypeScript
- Supabase (PostgreSQL)
- React Navigation
- Lucide React Native Icons

### 核心功能
- 成语浏览和学习
- 用户注册登录
- 学习记录跟踪
- 收藏管理
- 知识测试
- 成就解锁
- 统计分析

---

*注：版本号遵循语义化版本控制 (Semantic Versioning)*

## 版本 2.0.3 (2024-01-XX)

### 新增功能
- **测试系统集成** - 完整的成语测试功能
  - 多种测试类型：释义选择、拼音匹配、成语补全、出处典故、综合测试
  - 智能题目生成：基于成语数据库自动生成测试题目
  - 实时计时系统：每题独立计时，超时自动提交
  - 测试记录保存：完整记录用户答题历史和成绩
  - 测试统计分析：平均分、最高分、正确率等详细统计
  - 个性化推荐：基于历史表现推荐合适的测试类型和难度

- **成就系统实现** - 全面的成就解锁机制
  - 多类别成就：学习、连击、测试、收藏、特殊成就
  - 自动进度跟踪：实时更新成就进度，自动解锁
  - 积分奖励系统：解锁成就获得积分奖励
  - 成就统计面板：完成率、总积分、分类统计
  - 推荐成就功能：智能推荐即将解锁的成就

### 技术改进
- **useQuiz Hook** - 测试功能管理
  - 题目生成算法优化
  - 测试结果统计分析
  - 学习行为记录集成
  - TypeScript 类型安全

- **useAchievements Hook** - 成就系统管理
  - 成就进度自动更新
  - 多维度成就检查
  - 成就统计计算
  - 推荐算法实现

### 界面优化
- **测试页面重构** - 现代化测试体验
  - 登录状态检查和引导
  - 实时进度显示
  - 答题反馈优化
  - 成绩展示美化

- **成就页面更新** - 沉浸式成就体验
  - 用户认证集成
  - 成就卡片重设计
  - 推荐成就展示
  - 分类统计可视化

### 数据库增强
- 测试记录表完善
- 成就系统表结构优化
- 学习行为记录扩展
- 性能索引优化

## 版本 2.0.2 (2024-01-XX)

### 数据库架构
- **用户数据库创建完成** - 完整的用户数据架构部署
  - 9个核心表：用户信息、学习记录、收藏、测试记录、成就等
  - RLS（行级安全）策略部署
  - 数据库函数和触发器配置
  - 示例数据初始化

### 技术修复
- **SQL 脚本优化** - 解决重复运行问题
  - 添加 `DROP POLICY IF EXISTS` 语句
  - 修复策略重复创建错误
  - 确保脚本幂等性

### 文档更新
- 数据库配置指南完善
- 部署状态确认文档
- 版本信息更新

## 版本 2.0.1 (2024-01-XX)

### 功能实现
- **用户认证系统** - 完整的用户管理功能
  - 用户注册、登录、登出
  - 邮箱验证和密码重置
  - 用户资料管理
  - 认证状态管理

- **学习记录系统** - 详细的学习行为跟踪
  - 学习时长统计
  - 学习进度记录
  - 学习热力图数据
  - 连续学习天数计算

- **收藏系统** - 高级收藏管理
  - 成语收藏/取消收藏
  - 收藏标签系统
  - 收藏优先级管理
  - 收藏筛选和搜索

### 界面集成
- **个人资料页面** - 用户信息中心
  - 真实学习统计显示
  - 认证状态区分
  - 功能访问控制

- **收藏页面重构** - 完整收藏功能
  - 登录状态检查
  - 收藏操作集成
  - 筛选功能实现

### 技术架构
- **认证 Hook 系统** - useAuth
- **学习记录 Hook** - useLearningRecords  
- **收藏管理 Hook** - useFavorites
- **Supabase 服务集成** - 认证和数据服务

## 版本 2.0.0 (2024-01-XX)

### 重大更新
- **完整用户数据库设计** - 9个核心表的完整架构
  - users（用户信息表）
  - learning_records（学习记录表）
  - favorites（收藏表）
  - quiz_results（测试记录表）
  - achievements（成就定义表）
  - user_achievements（用户成就关联表）
  - learning_sessions（学习会话表）
  - user_settings（用户设置表）
  - learning_statistics（学习统计表）

### 数据库特性
- **高级功能支持**
  - 完整的 RLS（行级安全）策略
  - 性能优化索引
  - 自动触发器（成就进度更新）
  - 数据库函数（学习报告生成、连续天数计算）
  - TypeScript 接口定义
  - 离线数据同步支持

### 技术文档
- 数据模型完整文档
- Supabase 配置指南
- API 集成示例
- 开发指导文档

## 版本 1.0.1 (2024-01-XX)

### 环境修复
- **Windows 兼容性** - 解决 PowerShell 执行策略问题
  - 添加 cross-env 依赖支持跨平台环境变量
  - 修复 npm scripts 在 Windows 下的兼容性
  - 更新开发指南包含 Windows 特定说明

### 文档整理
- **文档结构优化** - 清理冗余文档
  - 删除重复的 Supabase 集成文档
  - 移除零散的设计草稿文件
  - 合并 API 文档避免重复
  - 更新文档索引和统计信息

### 项目维护
- 更新 package.json 脚本配置
- 完善 README 安装说明
- 优化开发环境设置

## 版本 1.0.0 (2024-01-XX)

### 核心功能
- **成语学习应用** - 基础功能完整实现
  - 成语浏览和搜索
  - 详细页面展示
  - 收藏功能
  - 测试系统
  - 统计分析

### 技术栈
- **React Native + Expo** - 跨平台移动应用
- **TypeScript** - 类型安全开发
- **Supabase** - 后端即服务
- **现代化 UI/UX** - 响应式设计

### 项目结构
- 完整的应用架构
- 模块化组件设计
- 数据管理系统
- 导航和路由配置

## 版本 2.0.4 - 2024-01-XX

### 🐛 问题修复
- 修复 Supabase 邮件速率限制问题
- 添加开发环境自动回退机制
- 优化用户注册流程

### 📚 文档更新
- 添加邮件速率限制解决方案指南
- 更新 SMTP 配置说明
- 添加开发环境配置说明

### 🛠️ 开发者工具
- 新增管理员模式用户创建功能
- 添加错误处理和重试机制
- 优化认证状态管理

### 💡 临时解决方案
1. **立即解决方案**：在 Supabase 项目设置中临时禁用邮件确认
   - 前往 Supabase Dashboard → Settings → Authentication
   - 关闭 "Enable email confirmations"
   - 注册后用户将直接激活

2. **长期解决方案**：配置自定义 SMTP 服务
   - 使用 Gmail SMTP 或其他邮件服务
   - 提高邮件发送限制
   - 详见 `docs/SUPABASE_配置指南.md`

3. **开发环境方案**：使用管理员模式创建用户
   - 自动检测邮件限制错误
   - 切换到管理员模式创建用户
   - 跳过邮件验证步骤

### 🔧 配置说明
- 开发环境默认启用自动回退机制
- 生产环境建议配置专业 SMTP 服务
- 支持多种邮件服务提供商

*本更新日志遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范。*

## 版本 2.0.5 - 2024-01-XX

### 🎉 新功能
- **高频成语学习系统**：全新的高频词汇学习模块
  - 集成高频成语数据库 (`ChengYu_GaoPin` 表)
  - 多种学习模式：随机、分类、易混淆、易错、复习
  - 智能难度分级：高、中、低难度自动识别
  - 专业学习界面：沉浸式学习体验

### 🛠️ 技术实现
- **数据层**：
  - 新增高频成语数据类型和API服务
  - 完整的数据转换和处理逻辑
  - 支持分类、难度、标签等多维度筛选
- **Hook层**：
  - `useGaoPin`: 高频成语数据管理
  - `useGaoPinLearning`: 专门的学习状态管理
- **组件层**：
  - `GaoPinCard`: 高频成语卡片组件
  - 高频成语列表页面 (`/gaopin`)
  - 高频成语详情页面 (`/gaopin/[id]`)
  - 沉浸式学习页面 (`/gaopin/learning`)

### 🎨 用户体验
- **主页集成**：添加高频词汇快速入口
- **多种展示模式**：完整卡片和紧凑模式
- **智能筛选**：支持分类、难度、搜索等筛选
- **学习进度跟踪**：实时显示学习进度和统计
- **收藏和标记**：支持收藏和学习状态标记

### 📊 数据特性
- **易混淆词语**：突出显示容易混淆的词语对
- **易错场景**：标注常见的使用错误场景
- **分类标签**：商务、学术、日常等多种分类
- **难度评估**：基于易错程度自动计算难度等级

### 🔗 功能集成
- 与现有学习记录系统完全集成
- 支持学习行为统计和分析
- 与收藏系统和成就系统联动
- 学习数据可用于个性化推荐

## 版本 2.0.4 - 2024-01-XX

### 🐛 Bug 修复
- **修复退出登录后页面不跳转问题**
  - 优化 useAuth Hook 中的认证状态监听逻辑
  - 修复退出登录后的自动导航功能
  - 添加详细的日志输出便于调试

- **修复认证状态管理问题**
  - 重构认证状态初始化流程
  - 优化认证状态监听器的设置时机
  - 修复认证状态变化时的异常处理

- **修复导航逻辑冲突**
  - 移除 AuthScreen 中的手动导航逻辑
  - 统一由 useAuth Hook 处理所有认证相关的导航
  - 避免重复跳转和导航冲突

- **优化用户体验**
  - 退出登录后自动跳转到首页
  - 优化登录成功后的状态更新
  - 改善错误处理和用户反馈

### 🔧 技术改进
- **认证流程优化**
  - 重构认证状态监听器设置逻辑
  - 优化异步认证流程的错误处理
  - 添加详细的调试日志

- **代码质量提升**
  - 统一认证相关的导航逻辑
  - 改善 TypeScript 类型安全
  - 优化错误处理机制

### 📝 文档更新
- 添加认证和导航逻辑修复文档
- 更新开发者调试指南
- 创建认证流程测试脚本

---

## 版本 2.0.3 (2024-01-XX)

### 🐛 Bug 修复
- **修复登录导航问题**
  - 登录成功后自动跳转到主页
  - 修复 profile 页面关闭按钮无响应问题
  - 优化登录成功后的用户体验

- **修复高频词汇学习问题**
  - 修复易错场景为"无"时不显示的问题
  - 优化筛选交互，使用下拉菜单替代弹窗
  - 修复学习模式没有内容的问题

### 🎨 UI/UX 改进
- **筛选界面优化**
  - 创建自定义下拉选择组件
  - 优化筛选按钮布局和交互
  - 改善用户筛选体验

### 🔧 技术改进
- **数据筛选优化**
  - 优化 gaoPinApi 中的筛选逻辑
  - 添加更严格的数据过滤条件
  - 改善数据查询性能

---

## 版本 2.0.2 (2024-01-XX)

### 🐛 Bug 修复
- **修复 RLS 权限问题**
  - 解决 "new row violates row-level security policy" 错误
  - 优化用户注册流程的时序问题
  - 简化 RLS 策略配置

### 🔧 技术改进
- **认证流程优化**
  - 修改认证流程时序，避免权限冲突
  - 优化用户记录创建逻辑
  - 改善错误处理和用户反馈

### 📝 文档更新
- 添加 RLS 权限问题修复总结
- 更新 Supabase 配置指南
- 创建权限问题排查指南

---

## 版本 2.0.1 (2024-01-XX)

### ✨ 新功能
- **手机号注册功能**
  - 支持中国大陆手机号注册
  - 短信验证码功能
  - 手机号格式验证和显示优化

### 🎨 UI/UX 改进
- **手机号注册界面**
  - 美观的渐变背景设计
  - 手机号格式化显示
  - 验证码输入优化

### 🔧 技术改进
- **认证系统扩展**
  - 扩展认证服务支持手机号
  - 双重认证方式（邮箱/手机号）
  - 统一的认证流程管理

### 📝 文档更新
- 添加手机号注册使用指南
- 更新 Supabase 配置文档
- 创建手机号认证技术文档

---

## 版本 2.0.0 (2024-01-XX)

### ✨ 新功能
- **用户认证系统**
  - 用户注册、登录、登出功能
  - 邮箱验证和密码重置
  - 用户资料管理

### 🎨 UI/UX 改进
- **认证界面设计**
  - 现代化的登录注册界面
  - 响应式设计适配
  - 优雅的错误提示

### 🔧 技术改进
- **Supabase 集成**
  - 完整的用户认证系统
  - 行级安全策略 (RLS)
  - 实时数据同步

### 📝 文档更新
- 完整的 API 文档
- 用户认证系统文档
- 开发者指南更新

---

### 图例说明
- ✅ 新增功能
- 🔧 修复问题  
- 🎨 优化改进
- 📱 移动端功能
- 🔐 安全相关
- 📄 文档更新
- 🛠️ 技术更新
- 📚 学习功能
- 🗄️ 数据库相关
- 🚀 重大更新
- 📊 统计分析
- 🎯 核心功能

*最后更新：2024年1月*

## [2024-01-XX] - 成语和高频词数据库关联功能

### 新增功能
- **成语高频词信息关联**: 在成语详情页面中自动检索对应的高频词信息
- **高频词信息展示**: 显示成语的分类、易混淆词汇、易错场景等高频词特有信息
- **智能标识系统**: 高频词成语会显示特殊标识和难度等级
- **动态信息查询**: 实时查询高频词数据库，显示最新的关联信息

### 用户体验改进
- 成语详情页面现在能够展示更丰富的学习信息
- 高频词成语会有明显的视觉标识
- 易混淆词汇和易错场景帮助用户避免常见错误
- 分类标签帮助用户理解成语的使用场景

### 技术实现
- 新增 `GaoPinApiService.getGaoPinByIdiomName()` 方法用于关联查询
- 创建 `GaoPinInfo` 组件展示高频词相关信息
- 在成语详情页面集成高频词信息查询和显示
- 支持批量查询高频词信息的API方法

### 影响的文件
- `services/gaoPinApi.ts` - 新增关联查询API方法
- `components/GaoPinInfo.tsx` - 新增高频词信息展示组件
- `app/idiom/[id].tsx` - 集成高频词信息显示

## [2024-01-XX] - 高频词学习逻辑优化

### 修复内容
- **修复高频词学习页面初始化问题**: 解决了无法筛选学习高频词的问题
- **改进学习会话管理**: 学习页面现在可以自动初始化学习内容
- **增强错误处理**: 添加了重试机制和更详细的错误提示
- **优化用户体验**: 改进了加载状态和错误状态的显示

### 技术改进
- 在学习页面添加了自动初始化逻辑，支持从URL参数恢复学习状态
- 改进了学习会话的参数传递机制
- 增加了更完善的错误处理和重试功能
- 优化了加载状态的显示逻辑

### 影响的文件
- `app/gaopin/learning.tsx` - 学习页面主要逻辑
- `app/gaopin.tsx` - 高频词主页面，改进了参数传递
- `hooks/useGaoPin.ts` - 相关钩子文件

*本更新日志遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范。* 