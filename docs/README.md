# 智语（JingYu）成语学习应用

## 🔥 最新优化 (2024-01-XX)

### 1. 🚀 重要优化：智能搜索排序算法
- **智能排序**：实现了复杂的相关性评分系统，确保最匹配的成语排在最前面
- **多维度匹配**：支持成语、拼音、解释、出处的智能匹配
- **权重排序**：完全匹配 > 开头匹配 > 包含匹配 > 拼音匹配 > 解释匹配
- **相关性提示**：显示"按相关性排序"帮助用户理解结果顺序

### 2. 搜索性能优化
- **默认不加载数据**：搜索页面现在默认不会加载任何成语数据
- **按需搜索**：只有在用户输入搜索关键词时才从数据库获取数据
- **更友好的提示**：显示搜索指引和数据量提示
- **防抖搜索**：添加 300ms 防抖，避免输入时频繁请求

### 3. 成语卡片简化
- **解释优先**：解释信息现在显示在第一位
- **直接显示**：移除了展开/收起功能，所有信息直接显示
- **完整信息**：包含解释、出处、例句和其他相关信息

### 4. 功能精简
- **移除复杂组件**：删除了不必要的浏览和学习组件
- **专注核心功能**：专注于成语展示和搜索的核心功能

### 5. 输入体验优化
- **修复焦点问题**：解决了输入一个字符后搜索框失去焦点的问题
- **流畅输入**：现在可以连续输入多个字符，无需重新点击

### 6. 脚本修复
- **启动脚本**：已使用 `cross-env` 统一设置 `EXPO_NO_TELEMETRY` 环境变量，Windows、macOS、Linux 均可直接运行 `npm run dev` / `npm start`。

## 🎉 **重要更新：Supabase 集成完成！**

**您的智语应用已成功集成 Supabase 数据库，现在可以使用 30,895 条真实成语数据！**

### 🚀 立即开始使用
- **[🎯 集成总结](./SUPABASE_集成总结.md)** - 查看完成的功能和特性
- **[📖 使用指南](./SUPABASE_使用指南.md)** - 如何在应用中使用新功能
- **[⚙️ 配置指南](./SUPABASE_配置指南.md)** - 数据库配置说明

### 🔥 新功能亮点
- ✅ **30,895 条真实成语数据** - 完整的成语库
- ✅ **智能搜索功能** - 支持成语、拼音、释义、典故搜索
- ✅ **按首字浏览** - 字母索引快速查找成语
- ✅ **随机学习模式** - 卡片式学习体验
- ✅ **高性能查询** - 分页和索引优化

```bash
# 立即运行并体验新功能
npm start
```

---

## 📖 项目概述

境语是一款专注于中华成语文化传承的移动学习应用，采用现代化的技术栈构建，为用户提供优雅、高效的成语学习体验。

### 🎯 项目使命
传承千年智慧，品味成语之美，让经典文化在数字时代焕发新的生命力。

## ✨ 最新更新 (Supabase 数据库集成版本)

### 🔥 Supabase 集成完成
- **真实数据库**：从本地数据升级到 Supabase 云数据库
- **30,895 条成语**：完整的成语数据库，包含释义、拼音、典故、例句
- **高性能查询**：分页加载、索引优化、实时搜索
- **多字段搜索**：支持成语内容、拼音、释义、典故全文搜索

### 🎨 全新视觉设计
- **明亮色彩贴纸风格**：采用幼儿园教学卡风格，色彩明亮，极具亲和力
- **渐变背景设计**：使用现代渐变色彩，提升视觉层次感
- **成语字体优化**：思源宋体配白色描边，视觉效果更加友好
- **动画反馈系统**：卡片弹出、点击反馈、收藏动画等生动交互

### 🏠 首页重新设计
- **今日成语卡片**：每日自动推荐成语，渐变卡片设计
- **中央学习按钮**：突出主要学习功能，保持焦点清晰
- **学习进度展示**：连续打卡天数、已掌握成语数、今日目标进度
- **统计数据可视化**：图标化展示学习数据，一目了然

### 📱 成语卡片全新升级
- **分类彩色标签**：不同类别使用不同颜色组合
- **可展开内容**：点击查看详细出处、例句、相似成语
- **发音按钮**：便捷的语音播放功能（待实现）
- **收藏动画**：心形图标动画反馈

### 📄 详情页面优化
- **动态颜色主题**：根据成语分类自动调整页面主色调
- **入场动画效果**：平滑的淡入和缩放动画
- **卡片式布局**：清晰的内容分层，提升阅读体验
- **难度等级显示**：直观展示成语学习难度

### 🎭 设计特色
- **极简风格**：整体UI清爽简洁，突出内容本身
- **无登录门槛**：无需注册即可使用，降低使用门槛
- **隐私保护**：本地数据处理，保护用户隐私
- **传统中国风**：融合现代设计与传统文化元素

## 🚀 技术栈

### 前端框架
- **React Native 0.79.1** - 跨平台移动应用框架
- **Expo 53.0.0** - 开发工具链和服务平台
- **TypeScript 5.8.3** - 类型安全的JavaScript超集

### 后端服务
- **Supabase** - 现代化 BaaS 平台
- **PostgreSQL** - 高性能关系型数据库
- **实时 API** - 支持实时数据同步

### 路由系统
- **Expo Router 5.0.2** - 基于文件系统的路由解决方案
- 支持标签页导航和动态路由

### UI组件库
- **Lucide React Native** - 现代化图标库
- **Expo Linear Gradient** - 渐变色背景支持
- **React Native Reanimated** - 高性能动画库

### 字体系统
- **思源宋体 (Noto Serif SC)** - 中文内容显示
- **Inter** - 英文和数字显示

## 📁 项目结构

```
境语项目/
├── app/                          # 应用页面
│   ├── (tabs)/                  # 标签页
│   │   ├── index.tsx           # 首页 - 今日成语和学习入口
│   │   ├── search.tsx          # 搜索页 - 成语搜索和浏览
│   │   ├── browse.tsx          # 浏览页 - 按首字浏览成语
│   │   ├── learn.tsx           # 学习页 - 随机学习模式
│   │   ├── favorites.tsx       # 收藏页 - 收藏的成语
│   │   └── profile.tsx         # 个人页 - 用户设置和统计
│   ├── idiom/                   # 成语详情
│   │   └── [id].tsx            # 动态路由 - 成语详情页
│   └── _layout.tsx             # 应用布局配置
├── components/                   # 可复用组件
│   ├── IdiomCard.tsx           # 成语卡片组件 - 核心展示组件
│   ├── SupabaseIdiomBrowser.tsx # 成语浏览组件 - 按首字浏览
│   └── RandomIdiomLearning.tsx # 随机学习组件 - 卡片式学习
├── services/                    # 服务层
│   ├── supabase.ts             # Supabase 客户端配置
│   ├── supabaseService.ts      # 数据库服务类
│   └── supabaseApi.ts          # 统一 API 接口
├── hooks/                       # 自定义Hooks
│   ├── useFrameworkReady.ts    # 框架准备状态Hook
│   └── useSupabaseApi.ts       # Supabase API Hooks
├── data/                        # 数据管理
│   └── idioms.ts               # 成语数据 - 包含完整成语信息
├── assets/                      # 静态资源
│   └── fonts/                  # 字体文件
└── docs/                       # 项目文档
    ├── SUPABASE_集成总结.md    # Supabase 集成总结
    ├── SUPABASE_使用指南.md    # 使用指南
    ├── SUPABASE_配置指南.md    # 配置指南
    └── supabaseAPI文档.md      # API 文档
```

## 🎨 核心功能

### 🏠 智能首页
- **今日成语推荐**：基于Supabase随机查询的每日成语推荐
- **学习进度追踪**：可视化展示学习统计数据
- **快速学习入口**：一键开始学习之旅
- **精选成语展示**：首页展示数据库中的精选成语

### 🔍 强大搜索
- **多维度搜索**：支持成语、拼音、含义、典故搜索
- **实时过滤**：输入即时显示搜索结果
- **智能匹配**：全文搜索提升搜索体验
- **高性能查询**：分页加载，支持30,000+成语搜索

### 📖 按首字浏览
- **字母索引**：按成语首字快速查找
- **分类展示**：网格布局展示所有可用首字
- **实时统计**：显示每个首字对应的成语数量

### 🎲 随机学习模式
- **卡片式学习**：优雅的学习卡片设计
- **显示/隐藏释义**：支持先思考后查看答案
- **学习进度跟踪**：记录学习数量和进度
- **无限刷新**：支持获取新的随机成语

### ❤️ 收藏系统
- **一键收藏**：快速标记喜爱的成语
- **本地存储**：收藏数据本地管理
- **动画反馈**：收藏操作提供视觉反馈

### 📖 详细解读
- **完整释义**：详细的成语含义解释
- **历史出处**：成语的历史来源和背景
- **使用例句**：实际运用场景展示
- **相似成语**：关联成语推荐学习
- **难度分级**：简单、中等、困难三个等级

## 🎯 数据模型

### Supabase 成语数据结构
```typescript
interface ChengYuApiRecord {
  id: string;           // 唯一标识符
  idiom: string;        // 成语四字
  pinyin: string;       // 拼音标注
  meaning: string;      // 释义说明
  origin: string;       // 历史出处
  example: string;      // 使用例句
  abbreviation: string; // 成语缩写
  pinyin_r: string;     // 拼音（另一种格式）
  first: string;        // 首字
  last: string;         // 末字
}
```

### 本地数据结构（向后兼容）
```typescript
interface Idiom {
  id: string;           // 唯一标识符
  idiom: string;        // 成语四字
  pinyin: string;       // 拼音标注
  meaning: string;      // 释义说明
  origin: string;       // 历史出处
  example: string;      // 使用例句
  similar: string[];    // 相似成语列表
  category: string;     // 分类标签
  difficulty: 'easy' | 'medium' | 'hard'; // 难度等级
}
```

### 分类体系
- **艺术创作**：与艺术、创作相关的成语
- **学习教育**：关于学习、教育的成语
- **志向理想**：表达理想、志向的成语
- **坚持努力**：强调努力、坚持的成语
- **医术技艺**：医学、技艺相关成语
- **传统成语**：从 Supabase 获取的成语默认分类

## 🎨 设计理念

### 色彩系统
- **主色调**：暖色系渐变 (#FF6B6B, #FF8E53)
- **分类色彩**：每个分类采用不同的双色渐变
- **中性色**：灰色系用于文本和背景
- **强调色**：红色系用于重点标注

### 交互设计
- **轻量级操作**：减少用户操作步骤
- **即时反馈**：所有操作提供动画反馈
- **手势友好**：支持滑动、点击等自然手势
- **渐进式展示**：内容分层展示，避免信息过载

### 动画效果
- **入场动画**：页面加载时的淡入效果
- **交互动画**：按钮点击、收藏等操作反馈
- **过渡动画**：页面切换的平滑过渡
- **微交互**：卡片悬停、按钮状态变化

## 🚀 快速开始

### 环境要求
- Node.js 18+
- Expo CLI
- iOS模拟器或Android模拟器

### 安装步骤
```bash
# 克隆项目
git clone [项目地址]
cd jingyu

# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 在模拟器中运行
# iOS: 按 'i'
# Android: 按 'a'
```

### 开发命令
```bash
npm start            # 启动开发服务器
npm run build:web    # 构建Web版本
npm run lint         # 代码检查
```

### 测试 Supabase 连接
```bash
# 测试数据库连接
node test-connection.js
```

## 📱 支持平台

- **iOS**：iPhone和iPad
- **Android**：手机和平板
- **Web**：现代浏览器支持

## 📚 文档目录

### 🔥 Supabase 集成文档
- [✅ 集成总结](./SUPABASE_集成总结.md) - 功能完成情况总览
- [📖 使用指南](./SUPABASE_使用指南.md) - 详细的使用说明和示例
- [🔧 技术文档](./SUPABASE_ACTUAL_INTEGRATION.md) - 技术实现细节
- [⚙️ 配置指南](./SUPABASE_配置指南.md) - 数据库配置步骤
- [📊 API 文档](./supabaseAPI文档.md) - API 接口说明

### 项目文档
- [项目总览](./project-overview.md) - 项目基本信息和目标
- [基本信息](./基本信息.md) - 项目的基础设置信息
- [架构设计](./architecture.md) - 系统架构和技术选型
- [开发指南](./development-guide.md) - 开发环境配置和流程
- [数据模型](./data-model.md) - 数据结构设计
- [组件文档](./components.md) - 组件使用说明
- [API 参考](./api-reference.md) - API 接口文档
- [更新日志](./changelog.md) - 版本更新记录

## 🔮 未来规划

### 版本 2.0 计划
- **用户系统**：基于 Supabase Auth 的用户认证
- **学习记录**：云端同步学习进度和收藏
- **语音朗读**：真人发音功能
- **学习计划**：个性化学习路径
- **成就系统**：学习徽章和奖励
- **社交分享**：成语卡片分享功能

### 长期愿景
- **AI 智能推荐**：基于学习行为的个性化推荐
- **多语言支持**：支持繁体中文和其他语言
- **线下功能**：支持离线学习模式
- **教育版本**：针对学校和教育机构的版本

## 💡 技术支持

如果您在使用过程中遇到问题：
1. 检查网络连接和 Supabase 配置
2. 查看控制台错误信息
3. 参考 [配置指南](./SUPABASE_配置指南.md) 进行排查
4. 运行 `node test-connection.js` 测试连接
5. 查看 [技术文档](./SUPABASE_ACTUAL_INTEGRATION.md) 了解实现细节

---

🎊 **恭喜您完成了智语应用的 Supabase 集成！现在开始享受丰富的成语学习体验吧！** 🎊 